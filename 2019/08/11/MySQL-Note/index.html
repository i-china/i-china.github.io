<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favico.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222">





  <meta name="keywords" content="MySQL,">





  <link rel="alternate" href="/atom.xml" title="iFaithFreedom" type="application/atom+xml">






<meta name="description" content="MySQL">
<meta name="keywords" content="MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="http://yoursite.com/2019/08/11/MySQL-Note/index.html">
<meta property="og:site_name" content="iFaithFreedom">
<meta property="og:description" content="MySQL">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-09-02T13:33:47.055Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL">
<meta name="twitter:description" content="MySQL">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/08/11/MySQL-Note/">





  <title>MySQL | iFaithFreedom</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">iFaithFreedom</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">文能提笔安天下，武能上马定乾坤</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/11/MySQL-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="<center> Hale Lv </center>">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="iFaithFreedom">
    </span>

    
      <header class="post-header">
	
		<i class="fa fa-heartbeat" aria-hidden="true">  </i>
		<font color="808080"> 热度 </font>
	
        
        
          <h1 class="post-title" itemprop="name headline">MySQL</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-11T13:00:23+08:00">
                2019-08-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  6.7k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  26
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <center> MySQL </center>

<a id="more"></a>

<h3 id="TODO-LIST"><a href="#TODO-LIST" class="headerlink" title="TODO LIST"></a>TODO LIST</h3><p>基本语法<br>常见用法<br>集群<br>缓存<br>主从复制<br>双主热备<br>分库分表<br>分布式架构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">创建表：</span><br><span class="line">	create table tb [if not exists] _name(</span><br><span class="line">		`id` int(10) auto_incrementl,</span><br><span class="line">		`name` varchar(20) not null default &apos;&apos;,</span><br><span class="line">		`user_id` int(10) default 1,	</span><br><span class="line">		`salary` float unique,</span><br><span class="line">		`create_at` time,</span><br><span class="line">		primary key(id,user_id),</span><br><span class="line">		contraint fk_name foreign key (field) references other_tb(id)</span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">	主键约束： primary key</span><br><span class="line">	外键约束： foreign key</span><br><span class="line">	非空约束： not null</span><br><span class="line">	唯一性约束：unique</span><br><span class="line">	默认约束：default value</span><br><span class="line">	自动增加： auto__increment</span><br><span class="line"></span><br><span class="line">查看表：</span><br><span class="line">	describe</span><br><span class="line">	describe tb_name / desc tb_name;</span><br><span class="line"></span><br><span class="line">查看表结构：</span><br><span class="line">	show create table tb_name \G</span><br><span class="line"></span><br><span class="line">查看警告信息：</span><br><span class="line">	show warnings;</span><br><span class="line"></span><br><span class="line">修改数据表: </span><br><span class="line"></span><br><span class="line">修改表名：</span><br><span class="line">	alter table tb_oldName rename tb_newName;</span><br><span class="line"></span><br><span class="line">修改自增ID值</span><br><span class="line">	alter table tb_name auto_increment = 1</span><br><span class="line"></span><br><span class="line">修改字段的数据类型：</span><br><span class="line">	alter table tb_name modify id int(11);</span><br><span class="line"></span><br><span class="line">修改字段名：</span><br><span class="line">	alter table tb_name change tb_old_field  tb_new_field int(10);</span><br><span class="line"></span><br><span class="line">添加字段：</span><br><span class="line">	alter table tb_7 add name varchar(100) [first|after id];</span><br><span class="line"></span><br><span class="line">删除字段：</span><br><span class="line">	alter table tb_7 drop fieldName;</span><br><span class="line"></span><br><span class="line">修改字段的排列位置：</span><br><span class="line">	alter table tb_7 modify name varchar(30) [first|after] id;</span><br><span class="line">	</span><br><span class="line">修改表的存储引擎：</span><br><span class="line">	alter table tb_7 engine = myisam;</span><br><span class="line"></span><br><span class="line">删除表的外键约束：</span><br><span class="line">	alter table tb_7 drop foreign key FK_Name;</span><br><span class="line"></span><br><span class="line">删除数据表:</span><br><span class="line">	drop table [if exists] tb_name;</span><br><span class="line"></span><br><span class="line">删除没有被关联的表:</span><br><span class="line">	drop table tb_name;</span><br><span class="line">删除被其他表关联的表的主表：</span><br><span class="line">	全部删除：删除会破坏表的参照完整性，先删除与之关联的子表，再删除父表，这样会删除两个表中的数据。</span><br><span class="line">	单独删除：如果保存子表，只需将关联表的外键约束条件取消，然后删除父表</span><br><span class="line"></span><br><span class="line">	alter table tb_name drop foreign key FK_Name;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">数据类型:</span><br><span class="line">整数类型:</span><br><span class="line">	tinyint		smallint	mediumint	int(integer)	bigint</span><br><span class="line"></span><br><span class="line">浮点类型:</span><br><span class="line">	浮点类型：float	double</span><br><span class="line">	定点类型：decimal</span><br><span class="line"></span><br><span class="line">字符串类型：</span><br><span class="line">	char	varchar		binary		varbinary	blob	text	enum	set</span><br><span class="line"></span><br><span class="line">二进制类型：</span><br><span class="line">	bit		binary		varbinary		tinyblob	blob	mediumblob		longblob</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">运算符：</span><br><span class="line">	算数运算：</span><br><span class="line">		+	-	 *	 /</span><br><span class="line">	比较运算:结果为 0，1 或者 null</span><br><span class="line">		=	&lt;=&gt;	  &lt;&gt;	(!=)	&lt;=	 &gt;=	   &gt;	is null		it not null		</span><br><span class="line">		least	  greatest		between		and		isnull		in		not in  </span><br><span class="line">		like		regexp</span><br><span class="line">	逻辑运算：</span><br><span class="line">		false	null	</span><br><span class="line">		not		null </span><br><span class="line">		and		&amp;&amp;</span><br><span class="line">		or		|| </span><br><span class="line">		xor</span><br><span class="line">	位操作运算：</span><br><span class="line">		|		&amp;		异或：^		&lt;&lt;		&gt;&gt;		取反：~</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">函数：</span><br><span class="line"></span><br><span class="line">数学函数：</span><br><span class="line">	绝对值函数： abc()</span><br><span class="line">	平方根函数|求余函数： mod(x,y)</span><br><span class="line">	获取整数函数： ceil(x), ceiling(x) , floor(x)</span><br><span class="line">	随机整数函数： rand()	rand(x)</span><br><span class="line">	四舍五入函数： round(x), round(x,y), truncate(x,y)</span><br><span class="line">	符号函数：	sign(x)</span><br><span class="line">	幂运算函数： pow(x,y), power(x,y), exp(x)</span><br><span class="line">	对数运算函数： log(x) , log10(x)</span><br><span class="line">	角度与弧度相互转换的函数： radians(x), degrees(x)</span><br><span class="line">	正弦函数： sin(x)， 反弦函数: asin(x)</span><br><span class="line">	余弦函数： cos(x),  反余弦函数： acos(x)</span><br><span class="line">	正切函数、反正切函数、余切函数</span><br><span class="line"></span><br><span class="line">字符串函数：</span><br><span class="line">	计算长度的函数： length(), char_length()</span><br><span class="line">	合并字符串的函数： concat(str,str1...),		concat_ws(str,str1...)</span><br><span class="line">	替换字符串的函数： insert(str1, x ,len,str2)</span><br><span class="line">	大小写转换函数： lower(),		upper()</span><br><span class="line">	获取指定长度的字符串的函数： left(s,n), right(s,n)</span><br><span class="line">	填充字符串的函数： lpad(str1,len,str2), rpad(str1,len,str2)</span><br><span class="line">	删除空格的函数： ltrim(s), rtrim(s), trim(s)</span><br><span class="line">	删除指定字符串的函数： trim(str1 from s)</span><br><span class="line">	重复生成字符串的函数： repeat(s,n)</span><br><span class="line">	比较字符串大小的函数：	strcmp(str,str1)</span><br><span class="line">	获取字串的函数： substring(s,n,len),	mid(s,n,len)</span><br><span class="line">	匹配字串开始位置的函数： locate(&apos;s&apos;,&apos;str&apos;); position(&apos;s&apos; in &apos;str&apos;); instr(&apos;str&apos;,&apos;s&apos;);</span><br><span class="line">	字符串逆序的函数： reverse(s)</span><br><span class="line">	返回指定位置的字符串的函数：	</span><br><span class="line">	返回指定字符串位置的函数： field(s,s1,s2)</span><br><span class="line">	返回字串位置的函数： find_in_set(s1,s2)</span><br><span class="line">	选取字符串的函数： make_set(x,s1,s2...)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">日期和时间函数：</span><br><span class="line">	当前日期和时间的函数：curdate(), current_date(), curdate()</span><br><span class="line">	时间函数获取系统当前时间：curtime(), current_time(), curtime() </span><br><span class="line">	获取当前系统日期和时间： current_timestamp(), localtime(), now(), sysdate()</span><br><span class="line">	Unix时间戳函数：unix_timestamp()</span><br><span class="line">	将UNIX时间戳转为普通格式时间： from_unixtime(&apos;1232131&apos;)</span><br><span class="line">	返回UTC日期的函数和返回UTC时间的函数：utc_date(), utc_time(),</span><br><span class="line">	返回月份的函数： month(date), monthname(date)</span><br><span class="line">	获取日期的函数： dayname(d)， dayofweek(d), weekday(d)</span><br><span class="line">	获取天数的函数： dayofyear(d), dayofmonth(d) </span><br><span class="line">	获取年份、季度、小时、分钟、秒钟的函数：year(),	quarter(), minute(), second()</span><br><span class="line">	获取日期的指定值的函数：  extract(type from d)</span><br><span class="line">	时间和秒钟转换的函数：time_to_sec(), sec_to_time(), </span><br><span class="line">	计算日期和时间的函数：date_add(), adddate(), date_sub(), subdate(), addtime(), datediff(),subtime(), </span><br><span class="line">	将日期和时间格式化的函数：date_format(), time_format(), get_format(), </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">条件判断函数：</span><br><span class="line">	if(expr,v,v1)</span><br><span class="line">	ifnull(v1,v2)</span><br><span class="line">	case, case value when, case when</span><br><span class="line"></span><br><span class="line">系统信息函数:</span><br><span class="line">	获取版本号、连接数、数据库名的函数：select version(), connect_id(), show processlist() select database(), select schema()</span><br><span class="line">	获取用户名的函数：select user() | current_user() | system_user()</span><br><span class="line">	获取字符串的字符集和排序方式的函数：charset(&apos;abc&apos;), charset(convert(&apos;abc&apos; using latin1), charset(version))</span><br><span class="line">	获取最后一个自动生成的ID值的函数：select last_insert_id() </span><br><span class="line"></span><br><span class="line">加密函数：</span><br><span class="line">	password(str)</span><br><span class="line">	md5(str)</span><br><span class="line">	加密函数：encode(str,pswd_str)</span><br><span class="line">	解密函数：decode(crypt_str,pswd_str)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">其他函数：</span><br><span class="line">	格式化函数：format()</span><br><span class="line">	不同进制的数字进行转换的函数：conv() </span><br><span class="line">	IP地址与数字相互转换的函数：inet_aton(), inet_ntoa()</span><br><span class="line">	加锁函数和解锁函数：select get_lock(), is_used_lock(), is_free_lock(), release_lock()</span><br><span class="line">	重复执行指定操作的函数：denchmark() </span><br><span class="line">	改变字符集的函数：convert() </span><br><span class="line">	改变数据类型的函数：cast(), convert()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">查询语句：</span><br><span class="line">	基本查询：</span><br><span class="line">		select &#123; *  | &#125; [from table_name  [ where &lt;&gt;] [group by &lt;&gt;] [ having &lt;&gt; ] [ order by &lt;&gt; ] [ limit [&lt;&gt;,] &lt;row count&gt;]  ]</span><br><span class="line">		select filed,field1...fieldN from [table | view] where [&lt;condition&gt;]	</span><br><span class="line">	单表查询：</span><br><span class="line">		查询所有字段：select * from table;</span><br><span class="line">		查询指定字段：select filed,field1... from table;</span><br><span class="line">		查询指定记录：select filed,filed1... from table where condition;</span><br><span class="line">		带 IN 关键字的查询：select filed,filed1... from table where filed in (a,z) order by field;</span><br><span class="line">		带 Between and 的范围查询：select filed from table where filed between a and z;</span><br><span class="line">		带 Like 的字符匹配查询：select filed from table where filed like &apos;%&apos;</span><br><span class="line">			% 匹配任意长度的字符，     _ 下划线只能匹配任意一个字符</span><br><span class="line">		查询空值：select filed from table where filed is null | is not null </span><br><span class="line">		带 And 的多条件查询：select field, field1 from table where filed &gt; condition and filed &gt; condition;</span><br><span class="line">		带 Or 的多条件查询：select field, filed1 from table where field = condition or filed1 = condition;</span><br><span class="line">		查询结果不重复：select distinct field from table;</span><br><span class="line">		对查询结果排序：select field,filed1 from table order by field | desc | asc </span><br><span class="line">		分组查询：</span><br><span class="line">			gourp by field having condition</span><br><span class="line">			创建分组，使用having过滤分组， 在group by 字句中使用with rollup， 多字段分组  group by 和order by 一起使用</span><br><span class="line">			select filed,filed1 from table gourp by filed having count(filed1) &gt; condition;&lt;F8&gt;&lt;F9&gt;</span><br><span class="line">			select filed,field1 from table gourp by filed with rollup;</span><br><span class="line">		用Limit 限制查询结果的数量：select * from table limit n | n,m;</span><br><span class="line"></span><br><span class="line">	集合函数查询：</span><br><span class="line">		count(),	sum()	avg()	max()	min()	</span><br><span class="line">	连接查询：</span><br><span class="line">		内连接：inner join </span><br><span class="line">			select tb_1.field from table where tb_2.filed = tb_1.id;</span><br><span class="line">		外连接：left join, right join</span><br><span class="line">		复合条件连接查询：</span><br><span class="line">		子查询：</span><br><span class="line">	子查询：</span><br><span class="line">	合并查询：</span><br><span class="line">	为表和字段取别名：</span><br><span class="line">	正则表达式查询：</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Author : Hale Lv</span><br><span class="line">@Created Time : 2019-09-02 12:43:57</span><br><span class="line">@Description :</span><br></pre></td></tr></table></figure>

<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><pre><code>存储方式
    计算机数据Data 的存储一般以 硬盘 为数据存储空间资源，从而保证计算机内的数据能够保持保存，对于数据的处理，一般采用数据库相关的技术进行处理，从而保证数据处理的高效性
数据库
    是数据管理的有效技术，是由一批数据构成的有序集合，这些数据存放在结构化的数据表里，数据表之间相互关联，反映客观事物的本质联系，有效帮助组织或企业科学管理各类信息资源
数据
    是数据库中存储的基本对象，是按一定顺序排列组合的物理符号，数据有多种表现形式，可是数字、文字、图像、音频、视频等，可经过数字化存入计算机
数据库 是 数据 的集合，具有同一的结构形式存放于统一的存储介质内，是多种应用数据的继承，并可悲各个应用程序共享</code></pre><h4 id="数据库的存储结构"><a href="#数据库的存储结构" class="headerlink" title="数据库的存储结构"></a>数据库的存储结构</h4><pre><code>是指数据库中的物理数据和逻辑数据的表示形式、物理和逻辑数据关系映射方式的描述。可使用两种形式描述客观现实的数据。物理数据和逻辑数据之间的转换通过数据库管理系统实现。
物理数据描述
    是指数据在存储设备上的存储方式，实际存放在存储设备上的数据。根据物理记录存储位置，可分为有序存储和无需存储</code></pre><h6 id="物理数据包括："><a href="#物理数据包括：" class="headerlink" title="物理数据包括："></a>物理数据包括：</h6><pre><code>1. 位 bit ： 二进制的一个单位称为位 ，位只能取 1 或 0
2. 字节 byte ： 8个位称为一个字节，可存放对应的ASCII码的一个字符
3. 字 word ： 若干个字节组成一个字，一个字所含的二进制的位数称为字长，计算计算机的字长是不同的，可是0、16、24、32位等
4. 块 block ： 内存储器和外存储器交换信息的最小单位，称为物理块或物理记录，每块大小为 256字节、512字节、1024字节等
5. 卷 volume ： 一台输入输出设备所能装载的全部有用信息，如；磁带机的一盘磁带即为一卷，磁盘设备的一个盘组也是一卷。
6. 无序存储 unordered ： 数据记录按照插入的顺序进行存储</code></pre><h6 id="逻辑数据描述"><a href="#逻辑数据描述" class="headerlink" title="逻辑数据描述"></a>逻辑数据描述</h6><pre><code>指用户或程序员用于操作的数据形式，是一种抽象的概念，是对客观现实世界的反映和记录，也可称为 逻辑记录
逻辑数据包含两个层次，一个层次是对客观现实信息世界的描述，另一个层次是对数据库管理系统中数据的描述
对客观信息世界的描述包括：
    1. 实体 entity ： 客观现实存在的东西用实体来描述，可是具体的、有型的，也可是抽象的、无形的对象，如： 一本书是一个有形对象，另一个是无形对象
    2. 实体集 entities ： 特征完全相同的同类实体的集合称为实体集，如一个图书馆所有书籍是一个实体集。
    3. 属性 attribute ： 实体的特性称为属性，每个属性都有一个值域。可以是整数类型、浮点数类型、字符类型、日期类型等
    4. 标识符 identifier ： 能够唯一地标识每个实体的属性或属性集，如 书的书号属性是实体书的标识符。
    关系型数据库管理系统介绍；
        1. 数据项 data item ： 也称字段field ，标记实体属性的命名的最小信息单位，命名采用属性的描述性名称
        2. 元组 tuple ： 也称 记录 record ，数据项的集合称为 元组，一个元组表示一个具体的实体
        3. 关系 relation ： 同一类元组所在的集合称为关系，适用于描述实体集，包括一个实体集的所有元组
        4. 键码 key ： 能够唯一标识关系中每个元组的数据项或数据项的组合称为关系的键码</code></pre><h3 id="数据库涉及的技术"><a href="#数据库涉及的技术" class="headerlink" title="数据库涉及的技术"></a>数据库涉及的技术</h3><pre><code>数据库系统
    Database Management System ，DBMS 是位于操作系统与用户之间的额一种操纵和管理数据库的软件，按照一定的数据模型科学地组织和存储数据，同时可提供数据高效地获取和维护
    DBMS 主要功能概括：
        1. 数据定义功能：    
            数据定义语言 Data Definition Language， DDL：用户通过它可方便对数据库中的数据对象进行定义
            数据操纵功能 Data Manipulation Language ，DML： 实现对数据库的基本操作，如：查询、插入、删除和修改等
            数据库的运行管理： 数据库在建立、运用和维护时由数据库管理系统统一管理、统一控制、保证数据的安全性、完整性、多用户对数据的并发使用及发生故障后的系统恢复，如；
                1. 数据的完整性检查功能保证用户输入的数据应该满足相应的约束条件
                2. 安全保护功能保证只有赋予权限的用户才能访问数据库中的数据
                3. 并发控制能力使多个用户可在同一时刻并发地访问数据库的数据
                4. 故障恢复功能使数据库运行出现故障时可进行数据恢复，保证数据库可靠运行
            提供方便、有效地存储数据库信息的接口和工具
                编程语言与数据库之间的接口进行数据库应用程序的开发。 数据库管理员Database Administrator， DBA 通过提供的工具对数据进行管理
            数据库的建立和维护功能
                数据库输出话数据的输入、转换功能，数据库的转储、恢复功能，数据库的重组织功能和性能监控、分析功能等
                数据库系统是指计算机系统中引入数据库后的系统，一个完整的数据库系统Database System ，DBS 一般由数据库、数据库管理系统、应用开发工具、应用系统、数据库管理员和用户组成。</code></pre><h3 id="SQL语言"><a href="#SQL语言" class="headerlink" title="SQL语言"></a>SQL语言</h3><pre><code>通过结构化查询语言 Structed Query Language， SQL来实现，是各种数据库交互方式的基础
SQL是一种数据库查询和程序设计语言，用户存取数据以及查询、更新和管理关系数据库系统    
优点：
    1. 一体化 ： SQL 集数据定义、数据操作和数据控制一体，可完成数据库中的全部工作
    2. 使用方式灵活： 两种使用方式，直接命令交互方式使用；也可嵌入使用，嵌入C、C++等
    3. 非过程化： 只提操作要求，不必描述操作步骤
    4. 语言简洁： 语法简单、好学好用。包含94个单词、6个核心功能动词

数据库访问技术
    包括： ODBC、DAO、OLE DB 和ADO
        ODBC ： Open Database Connectivity，开放数据库互连，建立了一组规范，提供了一组对数据库访问的标准API(应用程序编程接口)
        DAO ： Data Access Object ， 数据访问对象，是基于一个数据库对象集合的访问技术，独立于DBMS进行数据库的访问
        OLE DB ： Object Linking and Embedding Database，对象连接与嵌入。开放数据库连接通性 ODBC 的结构化查询语言SQL的能力，具有面向其他非SQL数据类型的通路，是一组读写数据的方法，对象主要包括数据源对象、阶段对象、命令对象和行组对象
        ADO ： ActiveX Data Objects，是一个用于存取数据源的COM组件，提供编程语言和统一数据访问方式OLE DB 的一个中间层，允许编写访问数据的代码而不用关心数据库是如何实现过得，只关心到数据库的连接</code></pre><h3 id="数据库的优势"><a href="#数据库的优势" class="headerlink" title="数据库的优势"></a>数据库的优势</h3><pre><code>具有以下系统特性：
    1. 使用C和C++编写，可移植性
    2. 支持Linux 、Mac OS、Windows 等多种操作系统
    3. 多种编程语言：C、C++、Python、PHP、Java、等
    4. 支持多线程，充分利用CPU资源
    5. 优化的SQL查询算法，有效提高查询速度
    6. 作为一个单独的应用程序在客户端服务器网络环境中，也可作为一个库嵌入其他的软件中
    7. 提供多语言支，编码： GB2312、BIG5等
    8. 提供TCP/IP、ODBC 和 JDBC 等多种数据库连接途径
    9. 提供用于管理、检查、优化数据库操作的管理工具
    10. 支持大型的数据库，可处理拥有上千万条记录的大型数据库
    11. 支持多种存储引擎

MySQL 版本及版本号
    如 mysql-5.7.20
        5 ：是主版本号
        7 ： 是发行级别
        20： 在此发行系列的版本号
新特性：
    1. 随机root密码
    2. 自定义test 数据库
    3. 默认SSL加密
    4. 密码过期策略
    5. 用户锁
    6. 全面支持JSON
    7. 支持两类生成列 generated column
    8. 引入系统库 sys schema
    具体看官网新版本的更新内容</code></pre><h3 id="MySQL-客户端和服务器端工具集"><a href="#MySQL-客户端和服务器端工具集" class="headerlink" title="MySQL 客户端和服务器端工具集"></a>MySQL 客户端和服务器端工具集</h3><pre><code>    MySQL 服务器端：
        1. mysqld ：SQL后台程序。必须运行，客户端才能连接服务器来访问数据库
        2. mysqld_safe ： 服务器启动脚本，mysqld_safe 来启动 mysqld 服务器，mysqld_safe 增加了安全性，如出现错误，重启服务器向错误日志写入运行时间信息
        3. mysql.server ： 服务器启动脚本，用于使用包含特定级别的、运行启动服务器脚本的、运行目录的系统，调用mysqld_safe 启动mysql服务器
        4. mysqld_multi ：服务器启动脚本，可启动或停止系统安装的多个服务器
        5. mysamchk ： 用来描述、检查、优化和维护MyISAM表的使用工具
        6. mysql.server ： 服务器启动脚本
        7. mysqlbug ： MySQL 缺陷报告脚本，可用来向MySQL邮件系统发送缺陷报告
        8. mysql_install_db ： 使用默认权限创建 MySQL授予权表，首次安装mysql时执行一次
    MySQL 客户端：
        1. myisampack ：压缩MyISAM 表产生更小的制度表的一个工具
        2. mysql ：交互输入SQL语句或从文件批处理模式执行他们的命令行工具
        3. mysqlaccess ： 检查访问主机名、用户名和额数据库组合的权限的脚本
        4. mysqladmin ： 执行管理操作的客户程序，如创建、删除、重载授权表、将表刷新到硬盘以及重新打开日志文件。 还可用来检查索引版本、进程及服务器的版本信息
        5. mysqlbinlog ： 从二进制日志读取语句的工具，在二进制日志文件中包含执行过的语句，可帮助系统从奔溃中恢复
        6. mysqlcheck ： 检查、修复、分析、优化表的表维护客户程序
        7. mysqldump ： 将MySQL数据库转储到一个文件
        8. mysqlhotcopy ： 当服务器在运行时，快速备份 MyISAM 或ISAM表的工具
        9. mysql import ： 使用LOAD DATA INFILE 将文本文件导入相应的额客户程序
        10. mysqlshow ： 显示数据库、表、列及索引相关信息的客户程序
        11. perror ： 显示系统或MySQL错误代码含义的工具

MySQL 免安装版配置
    [免安装版](http://c.biancheng.net/view/2412.html)</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Author : Hale Lv</span><br><span class="line">@Created Time : 2019-09-02 14:29:19</span><br><span class="line">@Description :</span><br></pre></td></tr></table></figure>

<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><pre><code>数据库可看作是一个专门存储数据对象的容器，这里的数据对象包括表、视图、触发器、存储过程等，表是最基本的数据对象，在创建数据对象前，先要创建数据库
创建数据库： CREATE DATABASE 
    CREATE DATABASE [IF NOT EXISTS] &lt;数据库名&gt; [[DEFAULT] CHARSET SET &lt;字符集名&gt;] [[DEFAULT] COLLATE &lt;校对规则名&gt;]；
    [] 是可选的，语法说明：
        - &lt;数据库名&gt; ： 创建数据库的名称，不区分大小写
        - IF NOT EXISTS : 在创建数据库之前进行判断，该数据库不存在时执行此操作
        - [DEFAULT] CHARSET SET : 指定数据库的默认字符集
        - [DEFAULT] COLLATE : 指定字符集的默认校对规则
    MYSQL 的字符集 CHARSET 和校对规则 COLLATION 两个不同概念： 字符集用来定义MYSQL存储字符串的方式，校对规则定义了比较字符串的方式，解决排序和字符分组的问题
    创建MYSQL数据库的语句：
        CREATE DATABASE test_db；
        MYSQL 不允许在同一系统创建两个相同名称的数据库
        CREATE DATABASE IF NOT EXISTS test_db； // 避免出现已存在错误提示
    创建MySQL数据库时指定字符集和校对规则
        创建test_db_char ，指定默认字符集为utf8， 默认校对规则为 utf8_chinese_ci
        CREATE DATABASE IF NOT EXISTS test_db_char
            DEFAULT CHARACTER SET utf8
            DEFAULT COLLATE utf8_chinese_ci;
    使用SHOW CREATE DATABASE查看 test_db_char 数据库的定义声明</code></pre><h3 id="MySQL查看或显示数据库（SHOW-DATABASES语句）"><a href="#MySQL查看或显示数据库（SHOW-DATABASES语句）" class="headerlink" title="MySQL查看或显示数据库（SHOW DATABASES语句）"></a>MySQL查看或显示数据库（SHOW DATABASES语句）</h3><pre><code>SHOW DATABASES [LIKE &apos;数据库名&apos;];
    1. LIKE 从句，可选，用于匹配数据库名
    2. 数据库名由 &apos;&apos; 包围
1. 查看所有数据库
    SHOW DATABASES
2. 创建并查看数据库
    CREATE DATABASE test_db；
    SHOW DATABASE;
3. 使用LIKE 语句
    SHOW DATABASES LIKE &apos;test_db&apos;;
    SHOW DATABASES LIKE &apos;%test%&apos;
    SHOW DATABASES LIKE &apos;db%&apos;
    SHOW DATABASES LIKE &apos;%db&apos;</code></pre><h3 id="MYSQL-修改数据库：-ALTER-DATABASE"><a href="#MYSQL-修改数据库：-ALTER-DATABASE" class="headerlink" title="MYSQL 修改数据库： ALTER DATABASE"></a>MYSQL 修改数据库： ALTER DATABASE</h3><pre><code>修改数据库，使用 ALTER DATABASE 或 ALTER SCHEMA 语句
修改数据库语法：
    ALTER DATABASES [数据库米ing] { [DEFAULT] CHARACTER SET &lt;字符集名&gt; [DEFAULT] COLLATE &lt;校对规则名&gt; }
        1. ALTER DATABASES 更改数据库的全局特性，存储在db.opt 文件中
        2. 需要获取ALTER 权限
        3. 数据库名可忽略， 对应默认数据库
        4. CHARCTER SET 子句用于更改默认的数据库字符集
修改数据库字符集
    SHOW CREATE DATABASE test_db；
    CREATE DATABASE test_db DEFAULT CHARACTER SET gb2312 DEFAULT COLLATE gb2312_chinese_ci;</code></pre><h3 id="删除数据库-DROP-DATABASES"><a href="#删除数据库-DROP-DATABASES" class="headerlink" title="删除数据库 DROP DATABASES"></a>删除数据库 DROP DATABASES</h3><pre><code>DROP DATABASE | DROP SCHEMA
DROP DATABASE [IF EXISTS] &lt;数据库名&gt;
    1. 数据库名： 指定要删除的数据库名
    2. IF EXISTS ： 防止当前数据库不存在时发生错误
    3. DROP DATABASE ： 删除数据库中的所有表哥并同时删除数据库
    不能删除 information_schema 和 mysql的两个系统数据库，否则不能工作
MYSQL删除数据库：
    DROP DATABASE test_db；
    DROP DATABASE IF NOT EXISTS test_db；</code></pre><h3 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h3><pre><code>USE 用来完成一个数据库到另一个数据库的跳转
USE &lt;数据库名&gt;</code></pre><h3 id="存储引擎详解"><a href="#存储引擎详解" class="headerlink" title="存储引擎详解"></a>存储引擎详解</h3><pre><code>存储引擎
    是数据库底层软件组件，使用数据引擎进行创建、查询、更新和删除数据操作
    InnoDb 事务型数据库的首选引擎， 支持事物安全表ACID，支持行锁定和外键
    MyISAM 基于ISAM的存储引擎，拥有较高的插入、查询速度，不支持事物
    可对每一个表使用不同的存储引擎
    支持的存储引擎有：
        InnoDB、MyISAM、Memory、Merge、Archive、Federated、CSV、Blackhole等</code></pre><h4 id="使用-SHOW-ENGINES，查看系统支持的引擎类型"><a href="#使用-SHOW-ENGINES，查看系统支持的引擎类型" class="headerlink" title="使用 SHOW ENGINES，查看系统支持的引擎类型"></a>使用 SHOW ENGINES，查看系统支持的引擎类型</h4><h3 id="如何选择MYSQL存储引擎"><a href="#如何选择MYSQL存储引擎" class="headerlink" title="如何选择MYSQL存储引擎"></a>如何选择MYSQL存储引擎</h3><pre><code>    功能                MyISAM        MEMORY        INNODB        ARCHIVE
  存储限制                256TB        RAM            64TB        NONE
  支持事物                No            No            Yes            No
支持全文索引            Yes            No            No            No
支持树索引                Yes            Yes            Yes            No
支持哈希索引            No            Yes            No            No
支持数据缓存            No            N/A            Yes            No
支持外键                No            No            Yes            No
选择MYSQL存储引擎的原则：
    1. 如要提交、回滚、恢复的事物安全ACID能力，并要求实现并发控制，选择InnoDB
    2. 插入和查询记录，选择MyISAM
    3. 临时存放数据，数据量不大， 不需要较高的数据安全性，可将数据保存在内存的MEMORY引擎中
    4. 如只有 INSET 和SELECT ，选择 ARCHIVE引擎，支持高并发的插入操作，适合存储归档数据，如记录日志信息可使用Archive
    一个数据库中可使用不同的引擎以满足各种性能和实际需求</code></pre><h4 id="MYSQL-默认存储引擎"><a href="#MYSQL-默认存储引擎" class="headerlink" title="MYSQL 默认存储引擎"></a>MYSQL 默认存储引擎</h4><pre><code>使用下面语句修改数据库临时的默认存储引擎：
    SET default_storage_engine = &lt;存储引擎名&gt;
        SET default_storage_engine = MyISAM;
    重启MYSQL客户端，默认存储引擎是 InnoDB</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Author : Hale Lv</span><br><span class="line">@Created Time : 2019-09-02 16:12:27</span><br><span class="line">@Description :</span><br></pre></td></tr></table></figure>

<h2 id="常见数据类型"><a href="#常见数据类型" class="headerlink" title="常见数据类型"></a>常见数据类型</h2><pre><code>1. 整数类型
    INTYINT、 SMALLINT、 MEDIUMINT、 INT、 BIGINT、 浮点数类型 FLOAT 和 DOUBLE，定点树类型 DECIMAL 
2. 日期/时间类型
    YEAR、 TIME、 DATE、 DATETIME 和 TIMESTAMP
3. 字符串类型
    CHAR、 VARCHAR、 BINARY、 VARBINARY、 BLOG、 TEXT、 ENUM、 SET等
4. 二进制类型
    BIT、 BINARY、 VARBINARY、 TINYBLOB、 BLOB、 MEDIUMBLOB、 LONGBLOB</code></pre><h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><pre><code>属性字段可以添加AUTO_INCREMENT 自增约束条件
    类型名称            说明            存储需求
    TINYINT            很小的整数            1个字节 | 0～255
    SMALLINT        小的整数            2个字节    | 0～65535 
    MEDIUMINT        中等大小的整数        3个字节    | 0～16777215
    INT|INTEGHR        普通大小的整数        4个字节    | 0～4294967295
    BININT            大整数                8个字节    | 0～18446744074709551615</code></pre><h3 id="小数类型-FLOAT、DOUBLE、-DECIMAL"><a href="#小数类型-FLOAT、DOUBLE、-DECIMAL" class="headerlink" title="小数类型 FLOAT、DOUBLE、 DECIMAL"></a>小数类型 FLOAT、DOUBLE、 DECIMAL</h3><pre><code>    单精度浮点数 FLOAT， 双精度浮点数 DOUBLE， 定点类型： DECIMAL
    浮点类型和定点类型都可用 M、D表示，M为精度，表示总共的位数， D为标度，表示小数的位数
    类型名称            说明            存储需求
    FLOAT            单精度浮点数        4个字节
    DOUBLE            双精度浮点数        8个字节
    DECIMAL(M,D), DEC  压缩的严格定点数    M+2个字节
定点数以字符串形式存储，对精度要求比较高的时候，使用DECIMAL的类型，避免做浮点数比较</code></pre><h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><pre><code>每一个类型都有合法的取值范围，当指定确定不合法的值时，系统将 零 值插入数据表中
类型名称        日期格式            日期范围                存储需求
YEAR            YYYY                1901～2155                1个字节
TIME            HH:MM:SS                                    3个字节
DATE            YYYY-MM-DD                                    3个字节
DATETIME        YYYY-MM-DD HH:MM:SS                            8个字节
TIMESTAMP        YYYY-MM-DD HH:MM:SS                            4个字节
[More](http://c.biancheng.net/view/2425.html)</code></pre><h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><pre><code>字符串类型中，括号中的M表示可为其指定长度
类型名称                说明                    存储需求
CHAR(M)
VARCHAR(M)
TINYTEXT
TEXT
MEDIUMTEXT
LONGTEXT
ENUM
SET
[More](http://c.biancheng.net/view/2426.html)</code></pre><h3 id="二进制类型"><a href="#二进制类型" class="headerlink" title="二进制类型"></a>二进制类型</h3><pre><code>类型名称            说明                存储需求
BIT(M)
BINARY(M)
VARBINARY(M)
BLOB(M)
MEDIUMBLOB(M)
LONGBLOB(M)
[More](http://c.biancheng.net/view/2428.html)</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Author : Hale Lv</span><br><span class="line">@Created Time : 2019-09-02 16:39:36</span><br><span class="line">@Description :</span><br></pre></td></tr></table></figure>

<h2 id="MYSQL-数据表增删改查"><a href="#MYSQL-数据表增删改查" class="headerlink" title="MYSQL 数据表增删改查"></a>MYSQL 数据表增删改查</h2><h3 id="创建数据表-CREATE-TABLE"><a href="#创建数据表-CREATE-TABLE" class="headerlink" title="创建数据表 CREATE TABLE"></a>创建数据表 CREATE TABLE</h3><pre><code>在已经创建的数据库中创建新表
    CREATE TABLE  &lt;表名&gt; ([表定义选项][表选项][分区选项]);
    主要由表创建定义 create-definition、 表选项 table-options 和 分区选项 partition-options 组成
        1. CREATE TABLE ： 用于创建给定名称的表，必须拥有表CREATE 的权限
        2. 表名： 指定要创建表的名称
        3. 表定义选项： 表创建定义，由列名col_name、列的定义 column_definition 以及空值说明、完整性约束或表索引组成
        4. 默认的情况，表被创建到当前的数据库中</code></pre><h4 id="在指定数据库中创建表"><a href="#在指定数据库中创建表" class="headerlink" title="在指定数据库中创建表"></a>在指定数据库中创建表</h4><pre><code>使用 USE 数据库名 指定操作的数据库
    USE 数据库名
    CREATE TABLE 数据表名 (
        ...
    )
查看表结构：
    DESC  | DESCRIBE  TABLE 
    SHOW CREATE TABLE
    各个字段的含义：
        1. NULL ：表示该列可存储NULL值
        2. Key ： 该列是否已编制索引，PRI：该列是表主键的一部分， UNI：UNIQUE索引的一部分， MUL：列中某个定植允许出现多次
        3. Default ： 表示该列是否有默认值，如有，值是多少
        4. Extra ： 可获取的与给定列有关的附加信息，如 AUTO_INCREMENT等
结合：
    SHOW CREATE TABLE &lt;TABLE_NAME&gt;\G;
    SHOW CREATE TABLE tb_name \G
    CREATE TABLE `tb_name` (
        `id` int(11) DEFAULT NULL,
        `name` varchar(100) DEFAULT NULL,
        `salary` float DEFAULT NULL
    )ENGINE=InnoDB DEFAULT CHARSET=gb2312</code></pre>
      
    </div>
    
    
    

      <div>
	
		
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/2019/08/11/MySQL-Note/">MySQL</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 <center> Hale Lv </center> 的个人博客"><center> Hale Lv </center></a></p>
  <p><span>发布时间:</span>2019年08月11日 - 13:08</p>
  <p><span>最后更新:</span>2019年09月02日 - 21:09</p>
  <p><span>原始链接:</span><a href="/2019/08/11/MySQL-Note/" title="MySQL">http://yoursite.com/2019/08/11/MySQL-Note/</a>
    <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://yoursite.com/2019/08/11/MySQL-Note/" aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
    });
    });  
</script>


	
      </div>

    
      <div>
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="http://39.106.208.58/pic/wechat.jpg" alt="<center> Hale Lv </center> wechat" style="width: 200px; max-width: 100%;">
    <div>扫一扫，公众号！</div>
</div>

      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>文能提笔安天下，武能上马定乾坤！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="http://39.106.208.58/pic/wxpay.jpg" alt="<center> Hale Lv </center> 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="http://39.106.208.58/pic/alipay.jpg" alt="<center> Hale Lv </center> 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
	
   <div>
	
		<div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

	
   </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/MySQL/" rel="tag"><i class="fa fa-tag"></i> MySQL</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/11/Hexo-Note/" rel="next" title="Hexo">
                <i class="fa fa-chevron-left"></i> Hexo
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/08/11/NoSQL-Note/" rel="prev" title="NoSQL">
                NoSQL <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>



  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="<center> Hale Lv </center>">
            
              <p class="site-author-name" itemprop="name"><center> Hale Lv </center></p>
              <p class="site-description motion-element" itemprop="description"><center> 上九天揽月，下五洋捉鳖。</center></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/hello.html">
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/i-china" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:mr_hale@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/mr_hale" target="_blank" title="FB Page">
                      
                        <i class="fa fa-fw fa-facebook"></i>FB Page</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://youtube.com/mr_hale" target="_blank" title="YouTube">
                      
                        <i class="fa fa-fw fa-youtube"></i>YouTube</a>
                  </span>
                
            </div>
          


          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://gitee.com/aspire_8" title="码云" target="_blank">码云</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://weibo.com/iaspirant" title="微博" target="_blank">微博</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com" title="阮一峰" target="_blank">阮一峰</a>
                  </li>
                
              </ul>
            </div>
          


          

        </div>
      </section>


      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#TODO-LIST"><span class="nav-number">1.</span> <span class="nav-text">TODO LIST</span></a></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库"><span class="nav-number"></span> <span class="nav-text">数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数据库的存储结构"><span class="nav-number">0.1.</span> <span class="nav-text">数据库的存储结构</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#物理数据包括："><span class="nav-number">0.1.0.1.</span> <span class="nav-text">物理数据包括：</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#逻辑数据描述"><span class="nav-number">0.1.0.2.</span> <span class="nav-text">逻辑数据描述</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库涉及的技术"><span class="nav-number">1.</span> <span class="nav-text">数据库涉及的技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL语言"><span class="nav-number">2.</span> <span class="nav-text">SQL语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库的优势"><span class="nav-number">3.</span> <span class="nav-text">数据库的优势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL-客户端和服务器端工具集"><span class="nav-number">4.</span> <span class="nav-text">MySQL 客户端和服务器端工具集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建数据库"><span class="nav-number"></span> <span class="nav-text">创建数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL查看或显示数据库（SHOW-DATABASES语句）"><span class="nav-number">1.</span> <span class="nav-text">MySQL查看或显示数据库（SHOW DATABASES语句）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MYSQL-修改数据库：-ALTER-DATABASE"><span class="nav-number">2.</span> <span class="nav-text">MYSQL 修改数据库： ALTER DATABASE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除数据库-DROP-DATABASES"><span class="nav-number">3.</span> <span class="nav-text">删除数据库 DROP DATABASES</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#选择数据库"><span class="nav-number">4.</span> <span class="nav-text">选择数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储引擎详解"><span class="nav-number">5.</span> <span class="nav-text">存储引擎详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-SHOW-ENGINES，查看系统支持的引擎类型"><span class="nav-number">5.1.</span> <span class="nav-text">使用 SHOW ENGINES，查看系统支持的引擎类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何选择MYSQL存储引擎"><span class="nav-number">6.</span> <span class="nav-text">如何选择MYSQL存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MYSQL-默认存储引擎"><span class="nav-number">6.1.</span> <span class="nav-text">MYSQL 默认存储引擎</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见数据类型"><span class="nav-number"></span> <span class="nav-text">常见数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#整数类型"><span class="nav-number">1.</span> <span class="nav-text">整数类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#小数类型-FLOAT、DOUBLE、-DECIMAL"><span class="nav-number">2.</span> <span class="nav-text">小数类型 FLOAT、DOUBLE、 DECIMAL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日期和时间类型"><span class="nav-number">3.</span> <span class="nav-text">日期和时间类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串类型"><span class="nav-number">4.</span> <span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二进制类型"><span class="nav-number">5.</span> <span class="nav-text">二进制类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MYSQL-数据表增删改查"><span class="nav-number"></span> <span class="nav-text">MYSQL 数据表增删改查</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建数据表-CREATE-TABLE"><span class="nav-number">1.</span> <span class="nav-text">创建数据表 CREATE TABLE</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#在指定数据库中创建表"><span class="nav-number">1.1.</span> <span class="nav-text">在指定数据库中创建表</span></a></li></ol></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      


<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h3 class="widget-title"> Hale's 标签云 </h3>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design/">Design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/">Golang</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Laravel/">Laravel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MarkDown/">MarkDown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NoSQL/">NoSQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/">Vim</a><span class="tag-list-count">1</span></li></ul>
        </canvas>
    </div>
</div>



    </div>

  </aside>



        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"> </i>
  </span>
  <span class="author" itemprop="copyrightHolder"><center> Hale Lv </center></span>

  
</div>


<!--  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>
-->



<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共94.7k字</span>
</div>







   <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>

<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
